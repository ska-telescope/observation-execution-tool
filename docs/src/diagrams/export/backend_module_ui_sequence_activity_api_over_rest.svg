<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="766px" preserveAspectRatio="none" style="width:1680px;height:766px;" version="1.1" viewBox="0 0 1680 766" width="1680px" zoomAndPan="magnify"><defs><filter height="300%" id="fhsc0cw26fhk6" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fhsc0cw26fhk6)" height="752.1406" style="stroke: #000000; stroke-width: 1.0;" width="1661" x="8" y="3"/><path d="M191,4 L191,12.2969 L181,22.2969 L8,22.2969 " fill="none" style="stroke: #000000; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="11" y="16.9951">Activity API over REST</text><rect fill="#FFFFFF" filter="url(#fhsc0cw26fhk6)" height="59.2656" style="stroke: #000000; stroke-width: 2.0;" width="256" x="702.5" y="243.5547"/><rect fill="#FFFFFF" filter="url(#fhsc0cw26fhk6)" height="162.7969" style="stroke: #000000; stroke-width: 2.0;" width="1199.5" x="463.5" y="520.75"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="64" x2="64" y1="80.8906" y2="700.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="328" x2="328" y1="80.8906" y2="700.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="587.5" x2="587.5" y1="80.8906" y2="700.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="827.5" x2="827.5" y1="80.8906" y2="700.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1047.5" x2="1047.5" y1="80.8906" y2="700.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1265.5" x2="1265.5" y1="80.8906" y2="700.5469"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1565" x2="1565" y1="80.8906" y2="700.5469"/><rect fill="#90EE90" filter="url(#fhsc0cw26fhk6)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="13" y="29.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="47.5" y="49.292">CLI :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="20" y="65.5889">RestClientUI</text><rect fill="#90EE90" filter="url(#fhsc0cw26fhk6)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="13" y="699.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="47.5" y="719.542">CLI :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="20" y="735.8389">RestClientUI</text><rect fill="#ADD8E6" filter="url(#fhsc0cw26fhk6)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="264" y="29.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="271" y="49.292">REST backend :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="284" y="65.5889">FlaskWorker</text><rect fill="#ADD8E6" filter="url(#fhsc0cw26fhk6)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="264" y="699.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="271" y="719.542">REST backend :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="284" y="735.8389">FlaskWorker</text><rect fill="#FEFECE" filter="url(#fhsc0cw26fhk6)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="225" x="473.5" y="29.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="543" y="49.292">SBAWorker:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="211" x="480.5" y="65.5889">ScheduingBlockAcitivityWorker</text><rect fill="#FEFECE" filter="url(#fhsc0cw26fhk6)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="225" x="473.5" y="699.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="543" y="719.542">SBAWorker:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="211" x="480.5" y="735.8389">ScheduingBlockAcitivityWorker</text><rect fill="#FEFECE" filter="url(#fhsc0cw26fhk6)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="226" x="712.5" y="29.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="763" y="49.292">SBActivityService:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="212" x="719.5" y="65.5889">ScheduingBlockAcitivityService</text><rect fill="#FEFECE" filter="url(#fhsc0cw26fhk6)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="226" x="712.5" y="699.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="121" x="763" y="719.542">SBActivityService:</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="212" x="719.5" y="735.8389">ScheduingBlockAcitivityService</text><rect fill="#ADD8E6" filter="url(#fhsc0cw26fhk6)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="187" x="952.5" y="29.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="1026" y="49.292">ODA :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="173" x="959.5" y="65.5889">Observation Data Archive</text><rect fill="#ADD8E6" filter="url(#fhsc0cw26fhk6)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="187" x="952.5" y="699.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="40" x="1026" y="719.542">ODA :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="173" x="959.5" y="735.8389">Observation Data Archive</text><rect fill="#FEFECE" filter="url(#fhsc0cw26fhk6)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="220" x="1153.5" y="29.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="1221" y="49.292">SESWorker :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="206" x="1160.5" y="65.5889">ScriptExecutionServiceWorker</text><rect fill="#FEFECE" filter="url(#fhsc0cw26fhk6)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="220" x="1153.5" y="699.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="1221" y="719.542">SESWorker :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="206" x="1160.5" y="735.8389">ScriptExecutionServiceWorker</text><rect fill="#FEFECE" filter="url(#fhsc0cw26fhk6)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="1478" y="29.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="145" x="1491" y="49.292">Script Execution API :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="1485" y="65.5889">ScriptExecutionService</text><rect fill="#FEFECE" filter="url(#fhsc0cw26fhk6)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="1478" y="699.5469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="145" x="1491" y="719.542">Script Execution API :</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="1485" y="735.8389">ScriptExecutionService</text><polygon fill="#A80036" points="316,108.0234,326,112.0234,316,116.0234,320,112.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64" x2="322" y1="112.0234" y2="112.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="71" y="106.9575">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="84" y="106.9575">HTTP POST to /api/v1/activities</text><polygon fill="#A80036" points="576,137.1563,586,141.1563,576,145.1563,580,141.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="328" x2="582" y1="141.1563" y2="141.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="335" y="136.0903">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="348" y="136.0903">send message request.activity.run</text><polygon fill="#A80036" points="815.5,166.2891,825.5,170.2891,815.5,174.2891,819.5,170.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="588" x2="821.5" y1="170.2891" y2="170.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="595" y="165.2231">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="608" y="165.2231">run(cmd: ActivityCommand)</text><polygon fill="#A80036" points="1036,195.4219,1046,199.4219,1036,203.4219,1040,199.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="827.5" x2="1042" y1="199.4219" y2="199.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="834.5" y="194.356">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="847.5" y="194.356">get_sbd(sbd_id)</text><polygon fill="#A80036" points="838.5,224.5547,828.5,228.5547,838.5,232.5547,834.5,228.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="832.5" x2="1047" y1="228.5547" y2="228.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="844.5" y="223.4888">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="857.5" y="223.4888">pdm.SchedulingBlock</text><path d="M702.5,243.5547 L772.5,243.5547 L772.5,250.5547 L762.5,260.5547 L702.5,260.5547 L702.5,243.5547 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="59.2656" style="stroke: #000000; stroke-width: 2.0;" width="256" x="702.5" y="243.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="717.5" y="256.6216">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="150" x="787.5" y="255.7651">[arg_override provided]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="827.5" x2="869.5" y1="281.8203" y2="281.8203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="869.5" x2="869.5" y1="281.8203" y2="294.8203"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="828.5" x2="869.5" y1="294.8203" y2="294.8203"/><polygon fill="#A80036" points="838.5,290.8203,828.5,294.8203,838.5,298.8203,834.5,294.8203" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="834.5" y="276.7544">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="847.5" y="276.7544">update SB args</text><polygon fill="#A80036" points="1253.5,326.9531,1263.5,330.9531,1253.5,334.9531,1257.5,330.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="827.5" x2="1259.5" y1="330.9531" y2="330.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="834.5" y="325.8872">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="847.5" y="325.8872">message request.procedure.prepare</text><polygon fill="#A80036" points="1553.5,356.0859,1563.5,360.0859,1553.5,364.0859,1557.5,360.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1265.5" x2="1559.5" y1="360.0859" y2="360.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1272.5" y="355.02">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="263" x="1285.5" y="355.02">prepare(cmd: PrepareProcessCommand)</text><polygon fill="#A80036" points="1276.5,385.2188,1266.5,389.2188,1276.5,393.2188,1272.5,389.2188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1270.5" x2="1564.5" y1="389.2188" y2="389.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="1282.5" y="384.1528">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1295.5" y="384.1528">ProcedureSummary</text><polygon fill="#A80036" points="838.5,414.3516,828.5,418.3516,838.5,422.3516,834.5,418.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="832.5" x2="1264.5" y1="418.3516" y2="418.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="844.5" y="413.2856">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="866.5" y="413.2856">message procedure.lifecycle.preparing</text><polygon fill="#A80036" points="599,443.4844,589,447.4844,599,451.4844,595,447.4844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="593" x2="826.5" y1="447.4844" y2="447.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="605" y="442.4185">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="627" y="442.4185">ActivitySummary</text><polygon fill="#A80036" points="339,472.6172,329,476.6172,339,480.6172,335,476.6172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="333" x2="587" y1="476.6172" y2="476.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="345" y="471.5513">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="367" y="471.5513">message activity.lifecycle.running</text><polygon fill="#A80036" points="75,501.75,65,505.75,75,509.75,71,505.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="69" x2="327" y1="505.75" y2="505.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="81" y="500.6841">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="103" y="500.6841">HTTP OK + ActivitySummary JSON</text><path d="M463.5,520.75 L533.5,520.75 L533.5,527.75 L523.5,537.75 L463.5,537.75 L463.5,520.75 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="162.7969" style="stroke: #000000; stroke-width: 2.0;" width="1199.5" x="463.5" y="520.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="478.5" y="533.8169">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="548.5" y="532.9604">[prepare_only not set]</text><polygon fill="#A80036" points="1253.5,555.0156,1263.5,559.0156,1253.5,563.0156,1257.5,559.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="827.5" x2="1259.5" y1="559.0156" y2="559.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="834.5" y="553.9497">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="298" x="856.5" y="553.9497">message request.procedure.start (force=true)</text><polygon fill="#A80036" points="1553.5,584.1484,1563.5,588.1484,1553.5,592.1484,1557.5,588.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1265.5" x2="1559.5" y1="588.1484" y2="588.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1272.5" y="583.0825">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="1294.5" y="583.0825">start(cmd: StartProcessCommand)</text><polygon fill="#A80036" points="1276.5,613.2813,1266.5,617.2813,1276.5,621.2813,1272.5,617.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1270.5" x2="1564.5" y1="617.2813" y2="617.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="1282.5" y="612.2153">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1304.5" y="612.2153">ProcedureSummary</text><polygon fill="#A80036" points="838.5,642.4141,828.5,646.4141,838.5,650.4141,834.5,646.4141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="832.5" x2="1264.5" y1="646.4141" y2="646.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="844.5" y="641.3481">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="866.5" y="641.3481">message procedure.lifecycle.started</text><polygon fill="#A80036" points="599,671.5469,589,675.5469,599,679.5469,595,675.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="593" x2="826.5" y1="675.5469" y2="675.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="605" y="670.481">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="627" y="670.481">ActivitySummary</text><!--MD5=[ee1747939293b8192a586424465d0d2d]
@startuml


mainframe **Activity API over REST**

autonumber

participant cli as "CLI :\nRestClientUI" #lightgreen
participant FlaskWorker as "REST backend :\nFlaskWorker" #lightblue
participant SBActivityWorker as "SBAWorker: \nScheduingBlockAcitivityWorker"
participant SBActivityService as "SBActivityService: \nScheduingBlockAcitivityService"
participant ODA as "ODA :\nObservation Data Archive" #lightblue
participant ScriptExecutionServiceWorker as "SESWorker :\nScriptExecutionServiceWorker"
participant ScriptExecutionService as "Script Execution API :\nScriptExecutionService"

cli -> FlaskWorker: HTTP POST to /api/v1/activities

FlaskWorker -> SBActivityWorker: send message request.activity.run

SBActivityWorker -> SBActivityService: run(cmd: ActivityCommand)

SBActivityService -> ODA: get_sbd(sbd_id)
ODA -> SBActivityService: pdm.SchedulingBlock
opt arg_override provided
SBActivityService -> SBActivityService: update SB args
end

SBActivityService -> ScriptExecutionServiceWorker: message request.procedure.prepare

ScriptExecutionServiceWorker -> ScriptExecutionService: prepare(cmd: PrepareProcessCommand)

ScriptExecutionService -> ScriptExecutionServiceWorker: ProcedureSummary

ScriptExecutionServiceWorker -> SBActivityService: message procedure.lifecycle.preparing

SBActivityService -> SBActivityWorker: ActivitySummary

SBActivityWorker -> FlaskWorker: message activity.lifecycle.running

cli <- FlaskWorker: HTTP OK + ActivitySummary JSON

opt prepare_only not set
SBActivityService -> ScriptExecutionServiceWorker: message request.procedure.start (force=true)

ScriptExecutionServiceWorker -> ScriptExecutionService: start(cmd: StartProcessCommand)

ScriptExecutionService -> ScriptExecutionServiceWorker: ProcedureSummary

ScriptExecutionServiceWorker -> SBActivityService: message procedure.lifecycle.started

SBActivityService -> SBActivityWorker: ActivitySummary

end

@enduml

PlantUML version 1.2020.06(Sun Apr 05 12:38:32 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 14-ea+33
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>