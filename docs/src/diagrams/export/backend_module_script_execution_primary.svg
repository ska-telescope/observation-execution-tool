<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1440px" preserveAspectRatio="none" style="width:1445px;height:1440px;background:#FFFFFF;" version="1.1" viewBox="0 0 1445 1440" width="1445px" zoomAndPan="magnify"><defs/><g><!--MD5=[4caa97c3b43e5ccb768f5326915ee1d4]
cluster ska_oso_oet.procedure--><g id="cluster_ska_oso_oet.procedure"><path d="M8.5,6 L171.5,6 A3.75,3.75 0 0 1 174,8.5 L181,28.4883 L1197.5,28.4883 A2.5,2.5 0 0 1 1200,30.9883 L1200,1430.5 A2.5,2.5 0 0 1 1197.5,1433 L8.5,1433 A2.5,2.5 0 0 1 6,1430.5 L6,8.5 A2.5,2.5 0 0 1 8.5,6 " style="stroke:#000000;stroke-width:1.5;fill:none;"/><line style="stroke:#000000;stroke-width:1.5;fill:none;" x1="6" x2="181" y1="28.4883" y2="28.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="162" x="10" y="21.5352">ska_oso_oet.procedure</text></g><!--MD5=[e05846e0557a046bf7b9258196848ed8]
cluster application_pkg--><g id="cluster_application_pkg"><path d="M151.5,49 L232.5,49 A3.75,3.75 0 0 1 235,51.5 L242,71.4883 L874.5,71.4883 A2.5,2.5 0 0 1 877,73.9883 L877,388.5 A2.5,2.5 0 0 1 874.5,391 L151.5,391 A2.5,2.5 0 0 1 149,388.5 L149,51.5 A2.5,2.5 0 0 1 151.5,49 " style="stroke:#000000;stroke-width:1.5;fill:none;"/><line style="stroke:#000000;stroke-width:1.5;fill:none;" x1="149" x2="242" y1="71.4883" y2="71.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="80" x="153" y="64.5352">application</text></g><!--MD5=[3ff016c1aa5003d713567a073e2181a6]
cluster application--><g id="cluster_application"><rect height="165" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;fill:none;" width="482" x="173" y="202"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="80" x="374" y="217.5352">application</text></g><!--MD5=[a70b0d373322012744ecc119c63f921b]
cluster main--><g id="cluster_main"><rect height="132" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;fill:none;" width="174" x="679" y="218.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="36" x="748" y="234.0352">main</text></g><!--MD5=[5237f998f19e09220ae26f82b025f45a]
cluster mptools--><g id="cluster_mptools"><rect height="530" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;fill:none;" width="602" x="574" y="620"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="60" x="845" y="635.5352">mptools</text></g><!--MD5=[27f772719433d509ddbc20ff768eba08]
cluster domain--><g id="cluster_domain"><rect height="985" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;fill:none;" width="520" x="30" y="424"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="54" x="263" y="439.5352">domain</text></g><!--MD5=[6904d586f11a3edbb4f4300b2174eed5]
cluster multiprocessing--><g id="cluster_multiprocessing"><path d="M1226.5,1236 L1344.5,1236 A3.75,3.75 0 0 1 1347,1238.5 L1354,1258.4883 L1435.5,1258.4883 A2.5,2.5 0 0 1 1438,1260.9883 L1438,1332.5 A2.5,2.5 0 0 1 1435.5,1335 L1226.5,1335 A2.5,2.5 0 0 1 1224,1332.5 L1224,1238.5 A2.5,2.5 0 0 1 1226.5,1236 " style="stroke:#000000;stroke-width:1.5;fill:none;"/><line style="stroke:#000000;stroke-width:1.5;fill:none;" x1="1224" x2="1354" y1="1258.4883" y2="1258.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="117" x="1228" y="1251.5352">multiprocessing</text></g><g id="elem_GMN6"><path d="M303.5,84 L303.5,155.2422 A0,0 0 0 0 303.5,155.2422 L410,155.2422 L414,236.75 L418,155.2422 L524.5,155.2422 A0,0 0 0 0 524.5,155.2422 L524.5,94 L514.5,84 L303.5,84 A0,0 0 0 0 303.5,84 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M514.5,84 L514.5,94 L524.5,94 L514.5,84 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="309.5" y="101.5684">See UI and Service API view</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="309.5" y="116.8789">for information on the input</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200" x="309.5" y="132.1895">arguments and output types for</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="176" x="309.5" y="147.1763">ScriptExecutionService</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="485.5" y="147.5">.</text></g><g id="elem_GMN11"><path d="M684.5,84 L684.5,155.2422 A0,0 0 0 0 684.5,155.2422 L762,155.2422 L766,253.32 L770,155.2422 L847.5,155.2422 A0,0 0 0 0 847.5,155.2422 L847.5,94 L837.5,84 L684.5,84 A0,0 0 0 0 684.5,84 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M837.5,84 L837.5,94 L847.5,94 L837.5,84 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="690.5" y="101.5684">See UI and Service API</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="690.5" y="116.8789">module view for more</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="690.5" y="132.1895">information on</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="112" x="690.5" y="147.1763">EventBusWorker</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="806.5" y="147.5">use.</text></g><!--MD5=[4048a361f681e6f68b2b7284d5ce3ea6]
class ScriptExecutionService--><g id="elem_ScriptExecutionService"><rect codeLine="8" fill="#F1F1F1" height="113.9531" id="ScriptExecutionService" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="450" x="189" y="237"/><ellipse cx="332.25" cy="253" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M334.7231,259.1431 Q334.1421,259.4419 333.5029,259.5913 Q332.8638,259.7407 332.1582,259.7407 Q329.6514,259.7407 328.3315,258.0889 Q327.0117,256.437 327.0117,253.3159 Q327.0117,250.1865 328.3315,248.5347 Q329.6514,246.8828 332.1582,246.8828 Q332.8638,246.8828 333.5112,247.0322 Q334.1587,247.1816 334.7231,247.4805 L334.7231,250.2031 Q334.0923,249.6221 333.4988,249.3523 Q332.9053,249.0825 332.2744,249.0825 Q330.9297,249.0825 330.2449,250.1492 Q329.5601,251.2158 329.5601,253.3159 Q329.5601,255.4077 330.2449,256.4744 Q330.9297,257.541 332.2744,257.541 Q332.9053,257.541 333.4988,257.2712 Q334.0923,257.0015 334.7231,256.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="155" x="352.75" y="258.291">ScriptExecutionService</text><line style="stroke:#181818;stroke-width:0.5;" x1="190" x2="638" y1="269" y2="269"/><line style="stroke:#181818;stroke-width:0.5;" x1="190" x2="638" y1="277" y2="277"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="438" x="195" y="294.5352">prepare(cmd: PrepareProcessCommand) -&gt; ProcedureSummary</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="394" x="195" y="311.0234">start(cmd: StartProcessCommand) -&gt; ProcedureSummary</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="425" x="195" y="327.5117">stop(cmd: StopProcessCommand) -&gt; List[ProcedureSummary]</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="372" x="195" y="344">summarise(pids: List[int]) -&gt; List[[ProcedureSummary]</text></g><!--MD5=[182a5f28d356566e59ae05a80103f461]
class EventBusWorker--><g id="elem_EventBusWorker"><rect codeLine="23" fill="#F1F1F1" height="80.9766" id="EventBusWorker" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="695" y="253.5"/><ellipse cx="710" cy="269.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M712.4731,275.6431 Q711.8921,275.9419 711.2529,276.0913 Q710.6138,276.2407 709.9082,276.2407 Q707.4014,276.2407 706.0815,274.5889 Q704.7617,272.937 704.7617,269.8159 Q704.7617,266.6865 706.0815,265.0347 Q707.4014,263.3828 709.9082,263.3828 Q710.6138,263.3828 711.2612,263.5322 Q711.9087,263.6816 712.4731,263.9805 L712.4731,266.7031 Q711.8423,266.1221 711.2488,265.8523 Q710.6553,265.5825 710.0244,265.5825 Q708.6797,265.5825 707.9949,266.6492 Q707.3101,267.7158 707.3101,269.8159 Q707.3101,271.9077 707.9949,272.9744 Q708.6797,274.041 710.0244,274.041 Q710.6553,274.041 711.2488,273.7712 Q711.8423,273.5015 712.4731,272.9204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="724" y="274.791">EventBusWorker</text><line style="stroke:#181818;stroke-width:0.5;" x1="696" x2="836" y1="285.5" y2="285.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="701" y="303.0352">work_q: MPQueue</text><line style="stroke:#181818;stroke-width:0.5;" x1="696" x2="836" y1="309.9883" y2="309.9883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="701" y="327.5234">main_func(event)</text></g><!--MD5=[db176b6dd1311b1f93c078a4ff022cdc]
class MainContext--><g id="elem_MainContext"><rect codeLine="37" fill="#F1F1F1" height="130.4414" id="MainContext" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="179" x="884.5" y="655"/><ellipse cx="926.05" cy="671" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M928.5231,677.1431 Q927.9421,677.4419 927.3029,677.5913 Q926.6638,677.7407 925.9582,677.7407 Q923.4514,677.7407 922.1315,676.0889 Q920.8117,674.437 920.8117,671.3159 Q920.8117,668.1865 922.1315,666.5347 Q923.4514,664.8828 925.9582,664.8828 Q926.6638,664.8828 927.3112,665.0322 Q927.9587,665.1816 928.5231,665.4805 L928.5231,668.2031 Q927.8923,667.6221 927.2988,667.3523 Q926.7053,667.0825 926.0744,667.0825 Q924.7297,667.0825 924.0449,668.1492 Q923.3601,669.2158 923.3601,671.3159 Q923.3601,673.4077 924.0449,674.4744 Q924.7297,675.541 926.0744,675.541 Q926.7053,675.541 927.2988,675.2712 Q927.8923,675.0015 928.5231,674.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="945.95" y="676.291">MainContext</text><line style="stroke:#181818;stroke-width:0.5;" x1="885.5" x2="1062.5" y1="687" y2="687"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="156" x="890.5" y="704.5352">queues: List[MPQueue]</text><line style="stroke:#181818;stroke-width:0.5;" x1="885.5" x2="1062.5" y1="711.4883" y2="711.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="890.5" y="729.0234">Proc() -&gt; Proc</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="890.5" y="745.5117">MPQueue() -&gt; MPQueue</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="890.5" y="762">stop_procs()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="890.5" y="778.4883">stop_queues()</text></g><!--MD5=[8023cede183458fa9cee1e01a7797573]
class Proc--><g id="elem_Proc"><rect codeLine="45" fill="#F1F1F1" height="97.4648" id="Proc" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="909" y="862.5"/><ellipse cx="954.75" cy="878.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M957.2231,884.6431 Q956.6421,884.9419 956.0029,885.0913 Q955.3638,885.2407 954.6582,885.2407 Q952.1514,885.2407 950.8315,883.5889 Q949.5117,881.937 949.5117,878.8159 Q949.5117,875.6865 950.8315,874.0347 Q952.1514,872.3828 954.6582,872.3828 Q955.3638,872.3828 956.0112,872.5322 Q956.6587,872.6816 957.2231,872.9805 L957.2231,875.7031 Q956.5923,875.1221 955.9988,874.8523 Q955.4053,874.5825 954.7744,874.5825 Q953.4297,874.5825 952.7449,875.6492 Q952.0601,876.7158 952.0601,878.8159 Q952.0601,880.9077 952.7449,881.9744 Q953.4297,883.041 954.7744,883.041 Q955.4053,883.041 955.9988,882.7712 Q956.5923,882.5015 957.2231,881.9204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="975.25" y="883.791">Proc</text><line style="stroke:#181818;stroke-width:0.5;" x1="910" x2="1038" y1="894.5" y2="894.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="915" y="912.0352">proc: ProcWorker</text><line style="stroke:#181818;stroke-width:0.5;" x1="910" x2="1038" y1="918.9883" y2="918.9883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="915" y="936.5234">full_stop()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="915" y="953.0117">terminate()</text></g><!--MD5=[681213061163026f0c719a2766348302]
class ProcWorker--><g id="elem_ProcWorker"><rect codeLine="51" fill="#F1F1F1" height="130.4414" id="ProcWorker" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="283" x="590.5" y="846"/><ellipse cx="688.25" cy="862" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M690.7231,868.1431 Q690.1421,868.4419 689.5029,868.5913 Q688.8638,868.7407 688.1582,868.7407 Q685.6514,868.7407 684.3315,867.0889 Q683.0117,865.437 683.0117,862.3159 Q683.0117,859.1865 684.3315,857.5347 Q685.6514,855.8828 688.1582,855.8828 Q688.8638,855.8828 689.5112,856.0322 Q690.1587,856.1816 690.7231,856.4805 L690.7231,859.2031 Q690.0923,858.6221 689.4988,858.3523 Q688.9053,858.0825 688.2744,858.0825 Q686.9297,858.0825 686.2449,859.1492 Q685.5601,860.2158 685.5601,862.3159 Q685.5601,864.4077 686.2449,865.4744 Q686.9297,866.541 688.2744,866.541 Q688.9053,866.541 689.4988,866.2712 Q690.0923,866.0015 690.7231,865.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="708.75" y="867.291">ProcWorker</text><line style="stroke:#181818;stroke-width:0.5;" x1="591.5" x2="872.5" y1="878" y2="878"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="252" x="596.5" y="895.5352">startup_event: multiprocessing.Event</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="271" x="596.5" y="912.0234">shutdown_event: multiprocessing.Event</text><line style="stroke:#181818;stroke-width:0.5;" x1="591.5" x2="872.5" y1="918.9766" y2="918.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="81" x="596.5" y="936.5117">main_func()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="596.5" y="953">main_loop()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="596.5" y="969.4883">...</text></g><!--MD5=[a45ce3b73187c2a9fd1fa719b1647198]
class QueueProcWorker--><g id="elem_QueueProcWorker"><rect codeLine="59" fill="#F1F1F1" height="80.9766" id="QueueProcWorker" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="156" x="667" y="679.5"/><ellipse cx="682" cy="695.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M684.4731,701.6431 Q683.8921,701.9419 683.2529,702.0913 Q682.6138,702.2407 681.9082,702.2407 Q679.4014,702.2407 678.0815,700.5889 Q676.7617,698.937 676.7617,695.8159 Q676.7617,692.6865 678.0815,691.0347 Q679.4014,689.3828 681.9082,689.3828 Q682.6138,689.3828 683.2612,689.5322 Q683.9087,689.6816 684.4731,689.9805 L684.4731,692.7031 Q683.8423,692.1221 683.2488,691.8523 Q682.6553,691.5825 682.0244,691.5825 Q680.6797,691.5825 679.9949,692.6492 Q679.3101,693.7158 679.3101,695.8159 Q679.3101,697.9077 679.9949,698.9744 Q680.6797,700.041 682.0244,700.041 Q682.6553,700.041 683.2488,699.7712 Q683.8423,699.5015 684.4731,698.9204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="696" y="700.791">QueueProcWorker</text><line style="stroke:#181818;stroke-width:0.5;" x1="668" x2="822" y1="711.5" y2="711.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="668" x2="822" y1="719.5" y2="719.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="118" x="673" y="737.0352">main_func(event)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="673" y="753.5234">main_loop()</text></g><!--MD5=[ef81f4b2c8545bfb7e60f6f7b5c3884c]
class MPQueue--><g id="elem_MPQueue"><rect codeLine="64" fill="#F1F1F1" height="80.9766" id="MPQueue" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132" x="987" y="1053"/><ellipse cx="1017.75" cy="1069" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1020.2231,1075.1431 Q1019.6421,1075.4419 1019.0029,1075.5913 Q1018.3638,1075.7407 1017.6582,1075.7407 Q1015.1514,1075.7407 1013.8315,1074.0889 Q1012.5117,1072.437 1012.5117,1069.3159 Q1012.5117,1066.1865 1013.8315,1064.5347 Q1015.1514,1062.8828 1017.6582,1062.8828 Q1018.3638,1062.8828 1019.0112,1063.0322 Q1019.6587,1063.1816 1020.2231,1063.4805 L1020.2231,1066.2031 Q1019.5923,1065.6221 1018.9988,1065.3523 Q1018.4053,1065.0825 1017.7744,1065.0825 Q1016.4297,1065.0825 1015.7449,1066.1492 Q1015.0601,1067.2158 1015.0601,1069.3159 Q1015.0601,1071.4077 1015.7449,1072.4744 Q1016.4297,1073.541 1017.7744,1073.541 Q1018.4053,1073.541 1018.9988,1073.2712 Q1019.5923,1073.0015 1020.2231,1072.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="1035.25" y="1074.291">MPQueue</text><line style="stroke:#181818;stroke-width:0.5;" x1="988" x2="1118" y1="1085" y2="1085"/><line style="stroke:#181818;stroke-width:0.5;" x1="988" x2="1118" y1="1093" y2="1093"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="33" x="993" y="1110.5352">put()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="993" y="1127.0234">safe_get() -&gt; Any</text></g><!--MD5=[21863f95080b8f4109c1a9d95286a4b5]
class ProcessManager--><g id="elem_ProcessManager"><rect codeLine="77" fill="#F1F1F1" height="113.9531" id="ProcessManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="226" x="308" y="459"/><ellipse cx="360.75" cy="475" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M363.2231,481.1431 Q362.6421,481.4419 362.0029,481.5913 Q361.3638,481.7407 360.6582,481.7407 Q358.1514,481.7407 356.8315,480.0889 Q355.5117,478.437 355.5117,475.3159 Q355.5117,472.1865 356.8315,470.5347 Q358.1514,468.8828 360.6582,468.8828 Q361.3638,468.8828 362.0112,469.0322 Q362.6587,469.1816 363.2231,469.4805 L363.2231,472.2031 Q362.5923,471.6221 361.9988,471.3523 Q361.4053,471.0825 360.7744,471.0825 Q359.4297,471.0825 358.7449,472.1492 Q358.0601,473.2158 358.0601,475.3159 Q358.0601,477.4077 358.7449,478.4744 Q359.4297,479.541 360.7744,479.541 Q361.4053,479.541 361.9988,479.2712 Q362.5923,479.0015 363.2231,478.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="381.25" y="480.291">ProcessManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="309" x2="533" y1="491" y2="491"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="214" x="314" y="508.5352">states: Dict[int, ProcedureState]</text><line style="stroke:#181818;stroke-width:0.5;" x1="309" x2="533" y1="515.4883" y2="515.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="314" y="533.0234">create(...)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="314" y="549.5117">run(...)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="314" y="566">stop(...)</text></g><!--MD5=[aa7ea4c8d725dc3060aacff0ae3d1145]
class EnvironmentManager--><g id="elem_EnvironmentManager"><rect codeLine="84" fill="#F1F1F1" height="80.9766" id="EnvironmentManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="179" x="93.5" y="475.5"/><ellipse cx="108.5" cy="491.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M110.9731,497.6431 Q110.3921,497.9419 109.7529,498.0913 Q109.1138,498.2407 108.4082,498.2407 Q105.9014,498.2407 104.5815,496.5889 Q103.2617,494.937 103.2617,491.8159 Q103.2617,488.6865 104.5815,487.0347 Q105.9014,485.3828 108.4082,485.3828 Q109.1138,485.3828 109.7612,485.5322 Q110.4087,485.6816 110.9731,485.9805 L110.9731,488.7031 Q110.3423,488.1221 109.7488,487.8523 Q109.1553,487.5825 108.5244,487.5825 Q107.1797,487.5825 106.4949,488.6492 Q105.8101,489.7158 105.8101,491.8159 Q105.8101,493.9077 106.4949,494.9744 Q107.1797,496.041 108.5244,496.041 Q109.1553,496.041 109.7488,495.7712 Q110.3423,495.5015 110.9731,494.9204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="122.5" y="496.791">EnvironmentManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="94.5" x2="271.5" y1="507.5" y2="507.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="94.5" x2="271.5" y1="515.5" y2="515.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="99.5" y="533.0352">create_env(...)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="99.5" y="549.5234">delete_env(...)</text></g><!--MD5=[5d0a77e8f66918aa15fe0099dd6d4ba9]
class Environment--><g id="elem_Environment"><rect codeLine="89" fill="#F1F1F1" height="97.4648" id="Environment" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="135.5" y="671.5"/><ellipse cx="156.8" cy="687.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M159.2731,693.6431 Q158.6921,693.9419 158.0529,694.0913 Q157.4138,694.2407 156.7082,694.2407 Q154.2014,694.2407 152.8815,692.5889 Q151.5617,690.937 151.5617,687.8159 Q151.5617,684.6865 152.8815,683.0347 Q154.2014,681.3828 156.7082,681.3828 Q157.4138,681.3828 158.0612,681.5322 Q158.7087,681.6816 159.2731,681.9805 L159.2731,684.7031 Q158.6423,684.1221 158.0488,683.8523 Q157.4553,683.5825 156.8244,683.5825 Q155.4797,683.5825 154.7949,684.6492 Q154.1101,685.7158 154.1101,687.8159 Q154.1101,689.9077 154.7949,690.9744 Q155.4797,692.041 156.8244,692.041 Q157.4553,692.041 158.0488,691.7712 Q158.6423,691.5015 159.2731,690.9204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="172.2" y="692.791">Environment</text><line style="stroke:#181818;stroke-width:0.5;" x1="136.5" x2="267.5" y1="703.5" y2="703.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107" x="141.5" y="721.0352">env_id: abstract</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="141.5" y="737.5234">site_packages: str</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="12" x="141.5" y="754.0117">...</text><line style="stroke:#181818;stroke-width:0.5;" x1="136.5" x2="267.5" y1="760.9648" y2="760.9648"/></g><!--MD5=[b198bb44a48bd30ec8cf58f9b4d3d5d6]
class ScriptWorker--><g id="elem_ScriptWorker"><rect codeLine="95" fill="#F1F1F1" height="130.4414" id="ScriptWorker" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="212" x="320" y="655"/><ellipse cx="377.75" cy="671" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M380.2231,677.1431 Q379.6421,677.4419 379.0029,677.5913 Q378.3638,677.7407 377.6582,677.7407 Q375.1514,677.7407 373.8315,676.0889 Q372.5117,674.437 372.5117,671.3159 Q372.5117,668.1865 373.8315,666.5347 Q375.1514,664.8828 377.6582,664.8828 Q378.3638,664.8828 379.0112,665.0322 Q379.6587,665.1816 380.2231,665.4805 L380.2231,668.2031 Q379.5923,667.6221 378.9988,667.3523 Q378.4053,667.0825 377.7744,667.0825 Q376.4297,667.0825 375.7449,668.1492 Q375.0601,669.2158 375.0601,671.3159 Q375.0601,673.4077 375.7449,674.4744 Q376.4297,675.541 377.7744,675.541 Q378.4053,675.541 378.9988,675.2712 Q379.5923,675.0015 380.2231,674.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="398.25" y="676.291">ScriptWorker</text><line style="stroke:#181818;stroke-width:0.5;" x1="321" x2="531" y1="687" y2="687"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="183" x="326" y="704.5352">work_q: mptools.MPQueue</text><line style="stroke:#181818;stroke-width:0.5;" x1="321" x2="531" y1="711.4883" y2="711.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="326" y="729.0234">main_func()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="326" y="745.5117">main_loop()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="200" x="326" y="762">load(script: ExecutableScript)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="326" y="778.4883">call_fn(...)</text></g><!--MD5=[13263f9aae361c96bd995cd1c2420d0a]
class ExecutableScript--><g id="elem_ExecutableScript"><rect codeLine="103" fill="#F1F1F1" height="48" id="ExecutableScript" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="146" x="265" y="1069.5"/><ellipse cx="280" cy="1085.5" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M279.8633,1080.8481 L278.7095,1085.9199 L281.0254,1085.9199 Z M278.3691,1078.6069 L281.3657,1078.6069 L284.7109,1091 L282.2622,1091 L281.4985,1087.937 L278.2197,1087.937 L277.4727,1091 L275.0239,1091 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="114" x="294" y="1090.791">ExecutableScript</text><line style="stroke:#181818;stroke-width:0.5;" x1="266" x2="410" y1="1101.5" y2="1101.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="266" x2="410" y1="1109.5" y2="1109.5"/></g><!--MD5=[5388228dfd16e8b25647ca0284da0e89]
class GitScript--><g id="elem_GitScript"><rect codeLine="104" fill="#F1F1F1" height="48" id="GitScript" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="444" y="887"/><ellipse cx="459" cy="903" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M461.4731,909.1431 Q460.8921,909.4419 460.2529,909.5913 Q459.6138,909.7407 458.9082,909.7407 Q456.4014,909.7407 455.0815,908.0889 Q453.7617,906.437 453.7617,903.3159 Q453.7617,900.1865 455.0815,898.5347 Q456.4014,896.8828 458.9082,896.8828 Q459.6138,896.8828 460.2612,897.0322 Q460.9087,897.1816 461.4731,897.4805 L461.4731,900.2031 Q460.8423,899.6221 460.2488,899.3523 Q459.6553,899.0825 459.0244,899.0825 Q457.6797,899.0825 456.9949,900.1492 Q456.3101,901.2158 456.3101,903.3159 Q456.3101,905.4077 456.9949,906.4744 Q457.6797,907.541 459.0244,907.541 Q459.6553,907.541 460.2488,907.2712 Q460.8423,907.0015 461.4731,906.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="473" y="908.291">GitScript</text><line style="stroke:#181818;stroke-width:0.5;" x1="445" x2="533" y1="919" y2="919"/><line style="stroke:#181818;stroke-width:0.5;" x1="445" x2="533" y1="927" y2="927"/></g><!--MD5=[a69e1ba87608a25246e7971a0bc46dd9]
class FilesystemScript--><g id="elem_FilesystemScript"><rect codeLine="105" fill="#F1F1F1" height="48" id="FilesystemScript" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="267" y="887"/><ellipse cx="282" cy="903" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M284.4731,909.1431 Q283.8921,909.4419 283.2529,909.5913 Q282.6138,909.7407 281.9082,909.7407 Q279.4014,909.7407 278.0815,908.0889 Q276.7617,906.437 276.7617,903.3159 Q276.7617,900.1865 278.0815,898.5347 Q279.4014,896.8828 281.9082,896.8828 Q282.6138,896.8828 283.2612,897.0322 Q283.9087,897.1816 284.4731,897.4805 L284.4731,900.2031 Q283.8423,899.6221 283.2488,899.3523 Q282.6553,899.0825 282.0244,899.0825 Q280.6797,899.0825 279.9949,900.1492 Q279.3101,901.2158 279.3101,903.3159 Q279.3101,905.4077 279.9949,906.4744 Q280.6797,907.541 282.0244,907.541 Q282.6553,907.541 283.2488,907.2712 Q283.8423,907.0015 284.4731,906.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="296" y="908.291">FilesystemScript</text><line style="stroke:#181818;stroke-width:0.5;" x1="268" x2="408" y1="919" y2="919"/><line style="stroke:#181818;stroke-width:0.5;" x1="268" x2="408" y1="927" y2="927"/></g><!--MD5=[4cd8da3cc660ccc805077feb75940c49]
class EmbeddedStringScript--><g id="elem_EmbeddedStringScript"><rect codeLine="106" fill="#F1F1F1" height="48" id="EmbeddedStringScript" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="185" x="46.5" y="887"/><ellipse cx="61.5" cy="903" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M63.9731,909.1431 Q63.3921,909.4419 62.7529,909.5913 Q62.1138,909.7407 61.4082,909.7407 Q58.9014,909.7407 57.5815,908.0889 Q56.2617,906.437 56.2617,903.3159 Q56.2617,900.1865 57.5815,898.5347 Q58.9014,896.8828 61.4082,896.8828 Q62.1138,896.8828 62.7612,897.0322 Q63.4087,897.1816 63.9731,897.4805 L63.9731,900.2031 Q63.3423,899.6221 62.7488,899.3523 Q62.1553,899.0825 61.5244,899.0825 Q60.1797,899.0825 59.4949,900.1492 Q58.8101,901.2158 58.8101,903.3159 Q58.8101,905.4077 59.4949,906.4744 Q60.1797,907.541 61.5244,907.541 Q62.1553,907.541 62.7488,907.2712 Q63.3423,907.0015 63.9731,906.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="75.5" y="908.291">EmbeddedStringScript</text><line style="stroke:#181818;stroke-width:0.5;" x1="47.5" x2="230.5" y1="919" y2="919"/><line style="stroke:#181818;stroke-width:0.5;" x1="47.5" x2="230.5" y1="927" y2="927"/></g><!--MD5=[21e0a38580498e330e866f309f232236]
class ProcedureState--><g id="elem_ProcedureState"><rect codeLine="111" fill="#F1F1F1" height="196.3945" id="ProcedureState" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="270" y="1197"/><ellipse cx="285" cy="1213" fill="#EB937F" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M288.6143,1219.5 L280.8945,1219.5 L280.8945,1207.1069 L288.6143,1207.1069 L288.6143,1209.2651 L283.3433,1209.2651 L283.3433,1211.938 L288.1162,1211.938 L288.1162,1214.0962 L283.3433,1214.0962 L283.3433,1217.3418 L288.6143,1217.3418 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="299" y="1218.291">ProcedureState</text><line style="stroke:#181818;stroke-width:0.5;" x1="271" x2="405" y1="1229" y2="1229"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="276" y="1246.5352">UNKNOWN</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="276" y="1263.0234">CREATING</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="276" y="1279.5117">IDLE</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="276" y="1296">LOADING</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="276" y="1312.4883">READY</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="276" y="1328.9766">RUNNING</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="276" y="1345.4648">COMPLETE</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="276" y="1361.9531">STOPPED</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47" x="276" y="1378.4414">FAILED</text><line style="stroke:#181818;stroke-width:0.5;" x1="271" x2="405" y1="1385.3945" y2="1385.3945"/></g><!--MD5=[8cd6aba8f60734d95fc306fd5c65d7ab]
class ProcedureInput--><g id="elem_ProcedureInput"><rect codeLine="123" fill="#F1F1F1" height="80.9766" id="ProcedureInput" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="77.5" y="1254.5"/><ellipse cx="101.05" cy="1270.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M103.5231,1276.6431 Q102.9421,1276.9419 102.3029,1277.0913 Q101.6638,1277.2407 100.9582,1277.2407 Q98.4514,1277.2407 97.1315,1275.5889 Q95.8117,1273.937 95.8117,1270.8159 Q95.8117,1267.6865 97.1315,1266.0347 Q98.4514,1264.3828 100.9582,1264.3828 Q101.6638,1264.3828 102.3112,1264.5322 Q102.9587,1264.6816 103.5231,1264.9805 L103.5231,1267.7031 Q102.8923,1267.1221 102.2988,1266.8523 Q101.7053,1266.5825 101.0744,1266.5825 Q99.7297,1266.5825 99.0449,1267.6492 Q98.3601,1268.7158 98.3601,1270.8159 Q98.3601,1272.9077 99.0449,1273.9744 Q99.7297,1275.041 101.0744,1275.041 Q101.7053,1275.041 102.2988,1274.7712 Q102.8923,1274.5015 103.5231,1273.9204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="116.95" y="1275.791">ProcedureInput</text><line style="stroke:#181818;stroke-width:0.5;" x1="78.5" x2="233.5" y1="1286.5" y2="1286.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="83.5" y="1304.0352">args: List</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="83.5" y="1320.5234">kwargs: Dict[str, Any]</text><line style="stroke:#181818;stroke-width:0.5;" x1="78.5" x2="233.5" y1="1327.4766" y2="1327.4766"/></g><!--MD5=[ac13618b1a974308c1f12eb6c57723dc]
class Event--><g id="elem_Event"><rect codeLine="140" fill="#F1F1F1" height="48" id="Event" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="1352.5" y="1271"/><ellipse cx="1367.5" cy="1287" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1369.9731,1293.1431 Q1369.3921,1293.4419 1368.7529,1293.5913 Q1368.1138,1293.7407 1367.4082,1293.7407 Q1364.9014,1293.7407 1363.5815,1292.0889 Q1362.2617,1290.437 1362.2617,1287.3159 Q1362.2617,1284.1865 1363.5815,1282.5347 Q1364.9014,1280.8828 1367.4082,1280.8828 Q1368.1138,1280.8828 1368.7612,1281.0322 Q1369.4087,1281.1816 1369.9731,1281.4805 L1369.9731,1284.2031 Q1369.3423,1283.6221 1368.7488,1283.3523 Q1368.1553,1283.0825 1367.5244,1283.0825 Q1366.1797,1283.0825 1365.4949,1284.1492 Q1364.8101,1285.2158 1364.8101,1287.3159 Q1364.8101,1289.4077 1365.4949,1290.4744 Q1366.1797,1291.541 1367.5244,1291.541 Q1368.1553,1291.541 1368.7488,1291.2712 Q1369.3423,1291.0015 1369.9731,1290.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37" x="1381.5" y="1292.291">Event</text><line style="stroke:#181818;stroke-width:0.5;" x1="1353.5" x2="1420.5" y1="1303" y2="1303"/><line style="stroke:#181818;stroke-width:0.5;" x1="1353.5" x2="1420.5" y1="1311" y2="1311"/></g><!--MD5=[15b0de36700cf8bf422172734e699e19]
class Queue--><g id="elem_Queue"><rect codeLine="141" fill="#F1F1F1" height="48" id="Queue" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77" x="1240.5" y="1271"/><ellipse cx="1255.5" cy="1287" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1257.9731,1293.1431 Q1257.3921,1293.4419 1256.7529,1293.5913 Q1256.1138,1293.7407 1255.4082,1293.7407 Q1252.9014,1293.7407 1251.5815,1292.0889 Q1250.2617,1290.437 1250.2617,1287.3159 Q1250.2617,1284.1865 1251.5815,1282.5347 Q1252.9014,1280.8828 1255.4082,1280.8828 Q1256.1138,1280.8828 1256.7612,1281.0322 Q1257.4087,1281.1816 1257.9731,1281.4805 L1257.9731,1284.2031 Q1257.3423,1283.6221 1256.7488,1283.3523 Q1256.1553,1283.0825 1255.5244,1283.0825 Q1254.1797,1283.0825 1253.4949,1284.1492 Q1252.8101,1285.2158 1252.8101,1287.3159 Q1252.8101,1289.4077 1253.4949,1290.4744 Q1254.1797,1291.541 1255.5244,1291.541 Q1256.1553,1291.541 1256.7488,1291.2712 Q1257.3423,1291.0015 1257.9731,1290.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="1269.5" y="1292.291">Queue</text><line style="stroke:#181818;stroke-width:0.5;" x1="1241.5" x2="1316.5" y1="1303" y2="1303"/><line style="stroke:#181818;stroke-width:0.5;" x1="1241.5" x2="1316.5" y1="1311" y2="1311"/></g><!--MD5=[7d2753583a89ecfd7af0ba6255d0ff0a]
reverse link MainContext to Proc--><g id="link_MainContext_Proc"><path codeLine="69" d="M974,798.52 C974,820.14 974,843 974,862.35 " fill="none" id="MainContext-backto-Proc" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="974,785.25,970,791.25,974,797.25,978,791.25,974,785.25" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="950.3844" y="851.66">0..*</text></g><!--MD5=[6a6b4f7b0a75f98ca93bd0eac27affef]
reverse link Proc to ProcWorker--><g id="link_Proc_ProcWorker"><path codeLine="70" d="M895.57,911 C888.31,911 881.05,911 873.8,911 " fill="none" id="Proc-backto-ProcWorker" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="908.63,911,902.63,907,896.63,911,902.63,915,908.63,911" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="893.0427" y="907.7396">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="881.3178" y="908.1783">1</text></g><!--MD5=[77bf649207943ea92b1fe5e25c79338c]
link QueueProcWorker to ProcWorker--><g id="link_QueueProcWorker_ProcWorker"><path codeLine="71" d="M742.27,760.62 C740.97,779.61 739.35,803.13 737.79,825.84 " fill="none" id="QueueProcWorker-to-ProcWorker" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="744.77,826.41,736.41,845.89,730.8,825.45,744.77,826.41" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[881c5765f971c7a6bd3048a191ad80ea]
reverse link ProcWorker to MPQueue--><g id="link_ProcWorker_MPQueue"><path codeLine="72" d="M857.52,982.58 C901.71,1007.43 949.62,1034.37 986.94,1055.36 " fill="none" id="ProcWorker-backto-MPQueue" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="846.08,976.15,849.3488,982.5777,856.5393,982.0325,853.2705,975.6048,846.08,976.15" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="922" y="1019.5684">event_q</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="970.8393" y="1047.6705">1</text></g><!--MD5=[0dec58d4b8cf2a8e2517d41fc046da0b]
link ProcWorker to MPQueue--><!--MD5=[2299e58efebefda4694b6b493f8b65bc]
reverse link MainContext to MPQueue--><g id="link_MainContext_MPQueue"><path codeLine="73" d="M1033.93,796.24 C1043.43,811.88 1051.82,828.84 1057,846 C1078.21,916.27 1069.2,1003.02 1060.95,1052.63 " fill="none" id="MainContext-backto-MPQueue" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1026.85,785.11,1026.7027,792.3196,1033.301,795.2285,1033.4484,788.0189,1026.85,785.11" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="1071" y="916.0684">event_q</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1053.6042" y="1042.2147">1</text></g><!--MD5=[372912cf6ec7d18640636b9aa66210a3]
link GitScript to ExecutableScript--><g id="link_GitScript_ExecutableScript"><path codeLine="107" d="M469.57,935.23 C444.54,965.15 400.67,1017.58 370.52,1053.62 " fill="none" id="GitScript-to-ExecutableScript" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="375.56,1058.51,357.36,1069.36,364.82,1049.53,375.56,1058.51" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[cc4b0d9d439cbc60cc82c97faef1d0fb]
link FilesystemScript to ExecutableScript--><g id="link_FilesystemScript_ExecutableScript"><path codeLine="108" d="M338,935.23 C338,963.93 338,1013.35 338,1049.14 " fill="none" id="FilesystemScript-to-ExecutableScript" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="345,1049.36,338,1069.36,331,1049.36,345,1049.36" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[0de5c1a0b63c2d3fc2b14a53bd70ebf0]
link EmbeddedStringScript to ExecutableScript--><g id="link_EmbeddedStringScript_ExecutableScript"><path codeLine="109" d="M164.61,935.23 C198.27,965.76 257.77,1019.73 297.55,1055.81 " fill="none" id="EmbeddedStringScript-to-ExecutableScript" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="302.38,1050.74,312.49,1069.36,292.97,1061.11,302.38,1050.74" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[b841c9415812c165f55b00c01b8ee23e]
link EnvironmentManager to ProcessManager--><g id="link_EnvironmentManager_ProcessManager"><path codeLine="128" d="M272.71,516 C280.02,516 287.32,516 294.62,516 " fill="none" id="EnvironmentManager-to-ProcessManager" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="307.76,516,301.76,512,295.76,516,301.76,520,307.76,516" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="280.4704" y="512.9611">1</text></g><!--MD5=[dbee85d0029efd06bede10c1b4df9223]
reverse link ProcessManager to MainContext--><g id="link_ProcessManager_MainContext"><path codeLine="129" d="M547.38,530.37 C633.45,543.06 748.16,567.16 841,612 C863.95,623.08 886.49,638.8 906.3,654.78 " fill="none" id="ProcessManager-backto-MainContext" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="534.36,528.5,539.7325,533.31,546.2389,530.2007,540.8663,525.3908,534.36,528.5" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="890.4578" y="644.3875">1</text></g><!--MD5=[306a95abab202c87289be44b702c481a]
reverse link EnvironmentManager to Environment--><g id="link_EnvironmentManager_Environment"><path codeLine="130" d="M188.01,570.26 C190.96,601.64 194.66,641.01 197.52,671.36 " fill="none" id="EnvironmentManager-backto-Environment" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="186.75,556.91,183.3279,563.2574,187.8709,568.8575,191.293,562.5101,186.75,556.91" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="173.2464" y="660.6715">0..*</text></g><!--MD5=[9a106bada0d9f66dc9aed61519a32989]
link ProcessManager to ScriptWorker--><!--MD5=[6b46a9c50ec8468fc336c820b01d2f81]
reverse link ScriptExecutionService to ProcessManager--><g id="link_ScriptExecutionService_ProcessManager"><path codeLine="134" d="M416.2,364.23 C417.17,394.63 418.29,429.87 419.21,458.64 " fill="none" id="ScriptExecutionService-backto-ProcessManager" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="415.78,351.08,411.9731,357.2044,416.1622,363.0739,419.9691,356.9495,415.78,351.08" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="410.5043" y="448.3253">1</text></g><!--MD5=[9099d908a56d6f1bdb6e146de59ac45f]
link ScriptWorker to ProcWorker--><g id="link_ScriptWorker_ProcWorker"><path codeLine="135" d="M530.02,785.25 C556.03,801.32 584.15,818.68 610.91,835.21 " fill="none" id="ScriptWorker-to-ProcWorker" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="614.93,829.46,628.26,845.93,607.57,841.37,614.93,829.46" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[f159cc05f73dfac9333cc88c11289d1a]
link MPQueue to Queue--><g id="link_MPQueue_Queue"><path codeLine="143" d="M1097.92,1134.15 C1138.65,1170.11 1198.19,1222.67 1237.74,1257.58 " fill="none" id="MPQueue-to-Queue" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1242.49,1252.43,1252.85,1270.92,1233.22,1262.93,1242.49,1252.43" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[2d48ebdf0a1c17734570f99b158f16c4]
link EventBusWorker to QueueProcWorker--><g id="link_EventBusWorker_QueueProcWorker"><path codeLine="145" d="M764.04,334.51 C760.35,409.15 752.32,571.27 747.96,659.27 " fill="none" id="EventBusWorker-to-QueueProcWorker" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="754.94,659.81,746.96,679.44,740.96,659.12,754.94,659.81" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[2d7b1ae5f8e5cc257f6a981a88e15d9c]
link Environment to GitScript--><!--MD5=[fb9b295b10f372a12e9fcae2b5981c44]
link ProcedureInput to ProcedureState--><!--MD5=[cc33fb6ffaa196727947b28e40200c56]
link ExecutableScript to ProcedureState--><!--MD5=[12b77b7821c544cb297623dc11973862]
@startuml
'https://plantuml.com/class-diagram

package ska_oso_oet.procedure {

    package application as application_pkg {

        package application <<Rectangle>> {
            class ScriptExecutionService {
                prepare(cmd: PrepareProcessCommand) -> ProcedureSummary
                start(cmd: StartProcessCommand) -> ProcedureSummary
                stop(cmd: StopProcessCommand) -> List[ProcedureSummary]
                summarise(pids: List[int]) -> List[[ProcedureSummary]
            }
        }
        note top
        See UI and Service API view
        for information on the input
        arguments and output types for
        ""ScriptExecutionService"".
        end note

        package main <<Rectangle>> {
            class EventBusWorker {
                work_q: MPQueue
                main_func(event)
            }
        }
        note top
            See UI and Service API
            module view for more
            information on
            ""EventBusWorker"" use.
        end note
    }

    package mptools <<Rectangle>> {
        class MainContext {
            queues: List[MPQueue]
            Proc() -> Proc
            MPQueue() -> MPQueue
            stop_procs()
            stop_queues()
        }

        class Proc {
            proc: ProcWorker
            full_stop()
            terminate()
        }

        class ProcWorker {
            startup_event: multiprocessing.Event
            shutdown_event: multiprocessing.Event
            {abstract} main_func()
            main_loop()
            {method} ...
        }

        class QueueProcWorker {
            {abstract} main_func(event)
            main_loop()
        }

        class MPQueue {
            put()
            safe_get() -> Any
        }

        MainContext *-down- "0..*" Proc
        Proc "1" *-right- "1" ProcWorker
        QueueProcWorker - -|> ProcWorker
        ProcWorker o- - "1" MPQueue: event_q
        MainContext *- "1" MPQueue: event_q
    }

    package domain <<Rectangle>> {
        class ProcessManager {
            states: Dict[int, ProcedureState]
            create(...)
            run(...)
            stop(...)
        }

        class EnvironmentManager {
            create_env(...)
            delete_env(...)
        }

        class Environment {
            env_id: abstract
            site_packages: str
            ...
        }

        class ScriptWorker {
            work_q: mptools.MPQueue
            main_func()
            main_loop()
            load(script: ExecutableScript)
            call_fn(...)
        }

        abstract class ExecutableScript
        class GitScript
        class FilesystemScript
        class EmbeddedStringScript
        GitScript - -|> ExecutableScript
        FilesystemScript - -|> ExecutableScript
        EmbeddedStringScript - -|> ExecutableScript

        enum ProcedureState {
            UNKNOWN
            CREATING
            IDLE
            LOADING
            READY
            RUNNING
            COMPLETE
            STOPPED
            FAILED
        }

        class ProcedureInput {
            args: List
            kwargs: Dict[str, Any]
        }

        ProcessManager *-left- "1" EnvironmentManager
        ProcessManager *-right- - "1" MainContext
        EnvironmentManager *- - "0..*" Environment
        ProcessManager -down[hidden]- ScriptWorker
    }

    ScriptExecutionService *- - "1" ProcessManager
    ScriptWorker - -|> ProcWorker

}

package multiprocessing {
    class Event
    class Queue
}
MPQueue - -|> Queue

EventBusWorker - -|> QueueProcWorker

Environment -down[hidden]- GitScript

MPQueue -up[hidden]- ProcWorker
ProcedureInput -right[hidden]- ProcedureState
ProcedureState -up[hidden]- ExecutableScript

@enduml

@startuml

package ska_oso_oet.procedure {

    package application as application_pkg {

        package application <<Rectangle>> {
            class ScriptExecutionService {
                prepare(cmd: PrepareProcessCommand) -> ProcedureSummary
                start(cmd: StartProcessCommand) -> ProcedureSummary
                stop(cmd: StopProcessCommand) -> List[ProcedureSummary]
                summarise(pids: List[int]) -> List[[ProcedureSummary]
            }
        }
        note top
        See UI and Service API view
        for information on the input
        arguments and output types for
        ""ScriptExecutionService"".
        end note

        package main <<Rectangle>> {
            class EventBusWorker {
                work_q: MPQueue
                main_func(event)
            }
        }
        note top
            See UI and Service API
            module view for more
            information on
            ""EventBusWorker"" use.
        end note
    }

    package mptools <<Rectangle>> {
        class MainContext {
            queues: List[MPQueue]
            Proc() -> Proc
            MPQueue() -> MPQueue
            stop_procs()
            stop_queues()
        }

        class Proc {
            proc: ProcWorker
            full_stop()
            terminate()
        }

        class ProcWorker {
            startup_event: multiprocessing.Event
            shutdown_event: multiprocessing.Event
            {abstract} main_func()
            main_loop()
            {method} ...
        }

        class QueueProcWorker {
            {abstract} main_func(event)
            main_loop()
        }

        class MPQueue {
            put()
            safe_get() -> Any
        }

        MainContext *-down- "0..*" Proc
        Proc "1" *-right- "1" ProcWorker
        QueueProcWorker - -|> ProcWorker
        ProcWorker o- - "1" MPQueue: event_q
        MainContext *- "1" MPQueue: event_q
    }

    package domain <<Rectangle>> {
        class ProcessManager {
            states: Dict[int, ProcedureState]
            create(...)
            run(...)
            stop(...)
        }

        class EnvironmentManager {
            create_env(...)
            delete_env(...)
        }

        class Environment {
            env_id: abstract
            site_packages: str
            ...
        }

        class ScriptWorker {
            work_q: mptools.MPQueue
            main_func()
            main_loop()
            load(script: ExecutableScript)
            call_fn(...)
        }

        abstract class ExecutableScript
        class GitScript
        class FilesystemScript
        class EmbeddedStringScript
        GitScript - -|> ExecutableScript
        FilesystemScript - -|> ExecutableScript
        EmbeddedStringScript - -|> ExecutableScript

        enum ProcedureState {
            UNKNOWN
            CREATING
            IDLE
            LOADING
            READY
            RUNNING
            COMPLETE
            STOPPED
            FAILED
        }

        class ProcedureInput {
            args: List
            kwargs: Dict[str, Any]
        }

        ProcessManager *-left- "1" EnvironmentManager
        ProcessManager *-right- - "1" MainContext
        EnvironmentManager *- - "0..*" Environment
        ProcessManager -down[hidden]- ScriptWorker
    }

    ScriptExecutionService *- - "1" ProcessManager
    ScriptWorker - -|> ProcWorker

}

package multiprocessing {
    class Event
    class Queue
}
MPQueue - -|> Queue

EventBusWorker - -|> QueueProcWorker

Environment -down[hidden]- GitScript

MPQueue -up[hidden]- ProcWorker
ProcedureInput -right[hidden]- ProcedureState
ProcedureState -up[hidden]- ExecutableScript

@enduml

PlantUML version 1.2022.5(Sat Apr 30 11:55:52 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>