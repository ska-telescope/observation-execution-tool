<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="733px" preserveAspectRatio="none" style="width:917px;height:733px;" version="1.1" viewBox="0 0 917 733" width="917px" zoomAndPan="magnify"><defs><filter height="300%" id="f1fph3cpgxwokg" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[4caa97c3b43e5ccb768f5326915ee1d4]
cluster ska_oso_oet.procedure--><polygon fill="#FFFFFF" filter="url(#f1fph3cpgxwokg)" points="14,16,204,16,211,38.2969,895,38.2969,895,721,14,721,14,16" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="14" x2="211" y1="38.2969" y2="38.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="184" x="18" y="30.9951">ska_oso_oet.procedure</text><!--MD5=[e05846e0557a046bf7b9258196848ed8]
cluster application_pkg--><polygon fill="#FFFFFF" filter="url(#f1fph3cpgxwokg)" points="148,43,239,43,246,65.2969,887,65.2969,887,713,148,713,148,43" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="148" x2="246" y1="65.2969" y2="65.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="152" y="57.9951">application</text><!--MD5=[a70b0d373322012744ecc119c63f921b]
cluster main--><rect fill="#FFFFFF" filter="url(#f1fph3cpgxwokg)" height="242" style="stroke: #000000; stroke-width: 1.5;" width="279" x="418" y="70"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="37" x="539" y="84.9951">main</text><!--MD5=[01b908eab77bdc64a587d21ad331408b]
cluster restserver--><rect fill="#FFFFFF" filter="url(#f1fph3cpgxwokg)" height="252" style="stroke: #000000; stroke-width: 1.5;" width="225" x="156" y="408"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="226.5" y="422.9951">restserver</text><!--MD5=[3ff016c1aa5003d713567a073e2181a6]
cluster application--><rect fill="#FFFFFF" filter="url(#f1fph3cpgxwokg)" height="307" style="stroke: #000000; stroke-width: 1.5;" width="479" x="400" y="398"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="597" y="412.9951">application</text><!--MD5=[71c2ab1c1c8272e025db689c64a870a2]
cluster flask--><polygon fill="#FFFFFF" filter="url(#f1fph3cpgxwokg)" points="22,411,65,411,72,433.2969,137,433.2969,137,660,22,660,22,411" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="72" y1="433.2969" y2="433.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="37" x="26" y="425.9951">flask</text><!--MD5=[b57936688dd02f834049b5feb8e1c3e8]
class ActivityWorker--><rect fill="#FEFECE" filter="url(#f1fph3cpgxwokg)" height="60.8047" id="ActivityWorker" style="stroke: #A80036; stroke-width: 1.5;" width="119" x="569.5" y="243"/><ellipse cx="584.5" cy="259" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M587.4688,264.6406 Q586.8906,264.9375 586.25,265.0781 Q585.6094,265.2344 584.9063,265.2344 Q582.4063,265.2344 581.0781,263.5938 Q579.7656,261.9375 579.7656,258.8125 Q579.7656,255.6875 581.0781,254.0313 Q582.4063,252.375 584.9063,252.375 Q585.6094,252.375 586.25,252.5313 Q586.9063,252.6875 587.4688,252.9844 L587.4688,255.7031 Q586.8438,255.125 586.25,254.8594 Q585.6563,254.5781 585.0313,254.5781 Q583.6875,254.5781 583,255.6563 Q582.3125,256.7188 582.3125,258.8125 Q582.3125,260.9063 583,261.9844 Q583.6875,263.0469 585.0313,263.0469 Q585.6563,263.0469 586.25,262.7813 Q586.8438,262.5 587.4688,261.9219 L587.4688,264.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="87" x="598.5" y="263.1543">ActivityWorker</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="570.5" x2="687.5" y1="275" y2="275"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="570.5" x2="687.5" y1="283" y2="283"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="575.5" y="297.2104">run(...)</text><!--MD5=[17238aaf72f47361d520c29dfe37cd7f]
class FlaskWorker--><rect fill="#FEFECE" filter="url(#f1fph3cpgxwokg)" height="48" id="FlaskWorker" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="426" y="249.5"/><ellipse cx="441" cy="265.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M443.9688,271.1406 Q443.3906,271.4375 442.75,271.5781 Q442.1094,271.7344 441.4063,271.7344 Q438.9063,271.7344 437.5781,270.0938 Q436.2656,268.4375 436.2656,265.3125 Q436.2656,262.1875 437.5781,260.5313 Q438.9063,258.875 441.4063,258.875 Q442.1094,258.875 442.75,259.0313 Q443.4063,259.1875 443.9688,259.4844 L443.9688,262.2031 Q443.3438,261.625 442.75,261.3594 Q442.1563,261.0781 441.5313,261.0781 Q440.1875,261.0781 439.5,262.1563 Q438.8125,263.2188 438.8125,265.3125 Q438.8125,267.4063 439.5,268.4844 Q440.1875,269.5469 441.5313,269.5469 Q442.1563,269.5469 442.75,269.2813 Q443.3438,269 443.9688,268.4219 L443.9688,271.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="76" x="455" y="269.6543">FlaskWorker</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="427" x2="533" y1="281.5" y2="281.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="427" x2="533" y1="289.5" y2="289.5"/><!--MD5=[182a5f28d356566e59ae05a80103f461]
class EventBusWorker--><rect fill="#FEFECE" filter="url(#f1fph3cpgxwokg)" height="86.4141" id="EventBusWorker" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="473" y="97"/><ellipse cx="488" cy="113" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M490.9688,118.6406 Q490.3906,118.9375 489.75,119.0781 Q489.1094,119.2344 488.4063,119.2344 Q485.9063,119.2344 484.5781,117.5938 Q483.2656,115.9375 483.2656,112.8125 Q483.2656,109.6875 484.5781,108.0313 Q485.9063,106.375 488.4063,106.375 Q489.1094,106.375 489.75,106.5313 Q490.4063,106.6875 490.9688,106.9844 L490.9688,109.7031 Q490.3438,109.125 489.75,108.8594 Q489.1563,108.5781 488.5313,108.5781 Q487.1875,108.5781 486.5,109.6563 Q485.8125,110.7188 485.8125,112.8125 Q485.8125,114.9063 486.5,115.9844 Q487.1875,117.0469 488.5313,117.0469 Q489.1563,117.0469 489.75,116.7813 Q490.3438,116.5 490.9688,115.9219 L490.9688,118.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="102" x="502" y="117.1543">EventBusWorker</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="474" x2="606" y1="129" y2="129"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="474" x2="606" y1="137" y2="137"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="479" y="151.2104">main_loop(...)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="479" y="164.0151">main_func(...)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="479" y="176.8198">republish(...)</text><!--MD5=[d26137e5d461602f48e26353ca7979f6]
class app--><rect fill="#FEFECE" filter="url(#f1fph3cpgxwokg)" height="53.9375" id="app" style="stroke: #A80036; stroke-width: 1.5;" width="173" x="164.5" y="435"/><ellipse cx="179.5" cy="453.9688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M182.4688,459.6094 Q181.8906,459.9063 181.25,460.0469 Q180.6094,460.2031 179.9063,460.2031 Q177.4063,460.2031 176.0781,458.5625 Q174.7656,456.9063 174.7656,453.7813 Q174.7656,450.6563 176.0781,449 Q177.4063,447.3438 179.9063,447.3438 Q180.6094,447.3438 181.25,447.5 Q181.9063,447.6563 182.4688,447.9531 L182.4688,450.6719 Q181.8438,450.0938 181.25,449.8281 Q180.6563,449.5469 180.0313,449.5469 Q178.6875,449.5469 178,450.625 Q177.3125,451.6875 177.3125,453.7813 Q177.3125,455.875 178,456.9531 Q178.6875,458.0156 180.0313,458.0156 Q180.6563,458.0156 181.25,457.75 Q181.8438,457.4688 182.4688,456.8906 L182.4688,459.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="145" x="191.5" y="451.1387">«function return value»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="24" x="252" y="465.1074">app</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="165.5" x2="336.5" y1="472.9375" y2="472.9375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="165.5" x2="336.5" y1="480.9375" y2="480.9375"/><!--MD5=[6f0c4b922742566c5bef8de2a86e8f4b]
class ActivityAPIBlueprint--><rect fill="#FEFECE" filter="url(#f1fph3cpgxwokg)" height="48" id="ActivityAPIBlueprint" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="170" y="604"/><ellipse cx="185" cy="620" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M187.9688,625.6406 Q187.3906,625.9375 186.75,626.0781 Q186.1094,626.2344 185.4063,626.2344 Q182.9063,626.2344 181.5781,624.5938 Q180.2656,622.9375 180.2656,619.8125 Q180.2656,616.6875 181.5781,615.0313 Q182.9063,613.375 185.4063,613.375 Q186.1094,613.375 186.75,613.5313 Q187.4063,613.6875 187.9688,613.9844 L187.9688,616.7031 Q187.3438,616.125 186.75,615.8594 Q186.1563,615.5781 185.5313,615.5781 Q184.1875,615.5781 183.5,616.6563 Q182.8125,617.7188 182.8125,619.8125 Q182.8125,621.9063 183.5,622.9844 Q184.1875,624.0469 185.5313,624.0469 Q186.1563,624.0469 186.75,623.7813 Q187.3438,623.5 187.9688,622.9219 L187.9688,625.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="118" x="199" y="624.1543">ActivityAPIBlueprint</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="171" x2="319" y1="636" y2="636"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="171" x2="319" y1="644" y2="644"/><!--MD5=[15ee56ae12769c5f2e72f0b218579190]
class ActivityService--><rect fill="#FEFECE" filter="url(#f1fph3cpgxwokg)" height="73.6094" id="ActivityService" style="stroke: #A80036; stroke-width: 1.5;" width="283" x="552.5" y="425"/><ellipse cx="645.75" cy="441" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M648.7188,446.6406 Q648.1406,446.9375 647.5,447.0781 Q646.8594,447.2344 646.1563,447.2344 Q643.6563,447.2344 642.3281,445.5938 Q641.0156,443.9375 641.0156,440.8125 Q641.0156,437.6875 642.3281,436.0313 Q643.6563,434.375 646.1563,434.375 Q646.8594,434.375 647.5,434.5313 Q648.1563,434.6875 648.7188,434.9844 L648.7188,437.7031 Q648.0938,437.125 647.5,436.8594 Q646.9063,436.5781 646.2813,436.5781 Q644.9375,436.5781 644.25,437.6563 Q643.5625,438.7188 643.5625,440.8125 Q643.5625,442.9063 644.25,443.9844 Q644.9375,445.0469 646.2813,445.0469 Q646.9063,445.0469 647.5,444.7813 Q648.0938,444.5 648.7188,443.9219 L648.7188,446.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="88" x="666.25" y="445.1543">ActivityService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="553.5" x2="834.5" y1="457" y2="457"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="169" x="558.5" y="471.2104">history: List[ActivitySummary]</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="553.5" x2="834.5" y1="477.8047" y2="477.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="271" x="558.5" y="492.0151">run(cmd: ActivityCommand) -&gt; ActivitySummary</text><!--MD5=[f77b6e4f7e832f6279357a8e333fb5f3]
class ActivitySummary--><rect fill="#FEFECE" filter="url(#f1fph3cpgxwokg)" height="137.6328" id="ActivitySummary" style="stroke: #A80036; stroke-width: 1.5;" width="275" x="580.5" y="559"/><ellipse cx="663.75" cy="575" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M666.7188,580.6406 Q666.1406,580.9375 665.5,581.0781 Q664.8594,581.2344 664.1563,581.2344 Q661.6563,581.2344 660.3281,579.5938 Q659.0156,577.9375 659.0156,574.8125 Q659.0156,571.6875 660.3281,570.0313 Q661.6563,568.375 664.1563,568.375 Q664.8594,568.375 665.5,568.5313 Q666.1563,568.6875 666.7188,568.9844 L666.7188,571.7031 Q666.0938,571.125 665.5,570.8594 Q664.9063,570.5781 664.2813,570.5781 Q662.9375,570.5781 662.25,571.6563 Q661.5625,572.7188 661.5625,574.8125 Q661.5625,576.9063 662.25,577.9844 Q662.9375,579.0469 664.2813,579.0469 Q664.9063,579.0469 665.5,578.7813 Q666.0938,578.5 666.7188,577.9219 L666.7188,580.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="684.25" y="579.1543">ActivitySummary</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="581.5" x2="854.5" y1="591" y2="591"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="586.5" y="605.2104">activity_id: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="96" x="586.5" y="618.0151">procedure_id: int</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="586.5" y="630.8198">sbd_id: str</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="586.5" y="643.6245">activity_name: str</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="586.5" y="656.4292">prepare_only: bool</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="586.5" y="669.2339">arg_override: Dict</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="581.5" x2="854.5" y1="675.8281" y2="675.8281"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="263" x="586.5" y="690.0386">activity_states: List[(ActivityState, timestamp)]</text><!--MD5=[7c8d4e4033842684f99cec4661c07e42]
class ActivityCommand--><rect fill="#FEFECE" filter="url(#f1fph3cpgxwokg)" height="99.2188" id="ActivityCommand" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="408.5" y="578.5"/><ellipse cx="423.5" cy="594.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M426.4688,600.1406 Q425.8906,600.4375 425.25,600.5781 Q424.6094,600.7344 423.9063,600.7344 Q421.4063,600.7344 420.0781,599.0938 Q418.7656,597.4375 418.7656,594.3125 Q418.7656,591.1875 420.0781,589.5313 Q421.4063,587.875 423.9063,587.875 Q424.6094,587.875 425.25,588.0313 Q425.9063,588.1875 426.4688,588.4844 L426.4688,591.2031 Q425.8438,590.625 425.25,590.3594 Q424.6563,590.0781 424.0313,590.0781 Q422.6875,590.0781 422,591.1563 Q421.3125,592.2188 421.3125,594.3125 Q421.3125,596.4063 422,597.4844 Q422.6875,598.5469 424.0313,598.5469 Q424.6563,598.5469 425.25,598.2813 Q425.8438,598 426.4688,597.4219 L426.4688,600.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="105" x="437.5" y="598.6543">ActivityCommand</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="409.5" x2="544.5" y1="610.5" y2="610.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="414.5" y="624.7104">sbd_id: str</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="414.5" y="637.5151">activity_name: str</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="414.5" y="650.3198">prepare_only: bool</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="414.5" y="663.1245">arg_override: Dict</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="409.5" x2="544.5" y1="669.7188" y2="669.7188"/><!--MD5=[92691f186a29e1f80a6717ce4cf4e4d2]
class ActivityState--><rect fill="#FEFECE" filter="url(#f1fph3cpgxwokg)" height="60.8047" id="ActivityState" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="408.5" y="431.5"/><ellipse cx="423.5" cy="447.5" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M427.6094,453.5 L419.8906,453.5 L419.8906,441.1094 L427.6094,441.1094 L427.6094,443.2656 L422.3438,443.2656 L422.3438,445.9375 L427.1094,445.9375 L427.1094,448.0938 L422.3438,448.0938 L422.3438,451.3438 L427.6094,451.3438 L427.6094,453.5 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="77" x="437.5" y="451.6543">ActivityState</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="409.5" x2="516.5" y1="463.5" y2="463.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="414.5" y="477.7104">REQUESTED</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="409.5" x2="516.5" y1="484.3047" y2="484.3047"/><!--MD5=[56dc9bd079fa0794426dfac01e4747ad]
class Flask--><rect fill="#FEFECE" filter="url(#f1fph3cpgxwokg)" height="48" id="Flask" style="stroke: #A80036; stroke-width: 1.5;" width="64" x="65" y="438"/><ellipse cx="80" cy="454" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M82.9688,459.6406 Q82.3906,459.9375 81.75,460.0781 Q81.1094,460.2344 80.4063,460.2344 Q77.9063,460.2344 76.5781,458.5938 Q75.2656,456.9375 75.2656,453.8125 Q75.2656,450.6875 76.5781,449.0313 Q77.9063,447.375 80.4063,447.375 Q81.1094,447.375 81.75,447.5313 Q82.4063,447.6875 82.9688,447.9844 L82.9688,450.7031 Q82.3438,450.125 81.75,449.8594 Q81.1563,449.5781 80.5313,449.5781 Q79.1875,449.5781 78.5,450.6563 Q77.8125,451.7188 77.8125,453.8125 Q77.8125,455.9063 78.5,456.9844 Q79.1875,458.0469 80.5313,458.0469 Q81.1563,458.0469 81.75,457.7813 Q82.3438,457.5 82.9688,456.9219 L82.9688,459.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="32" x="94" y="458.1543">Flask</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="66" x2="128" y1="470" y2="470"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="66" x2="128" y1="478" y2="478"/><!--MD5=[687b898a26107f91307f914974ba425d]
class Blueprint--><rect fill="#FEFECE" filter="url(#f1fph3cpgxwokg)" height="48" id="Blueprint" style="stroke: #A80036; stroke-width: 1.5;" width="88" x="41" y="604"/><ellipse cx="56" cy="620" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M58.9688,625.6406 Q58.3906,625.9375 57.75,626.0781 Q57.1094,626.2344 56.4063,626.2344 Q53.9063,626.2344 52.5781,624.5938 Q51.2656,622.9375 51.2656,619.8125 Q51.2656,616.6875 52.5781,615.0313 Q53.9063,613.375 56.4063,613.375 Q57.1094,613.375 57.75,613.5313 Q58.4063,613.6875 58.9688,613.9844 L58.9688,616.7031 Q58.3438,616.125 57.75,615.8594 Q57.1563,615.5781 56.5313,615.5781 Q55.1875,615.5781 54.5,616.6563 Q53.8125,617.7188 53.8125,619.8125 Q53.8125,621.9063 54.5,622.9844 Q55.1875,624.0469 56.5313,624.0469 Q57.1563,624.0469 57.75,623.7813 Q58.3438,623.5 58.9688,622.9219 L58.9688,625.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="56" x="70" y="624.1543">Blueprint</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="42" x2="128" y1="636" y2="636"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="42" x2="128" y1="644" y2="644"/><!--MD5=[41dc59b21b446ce9253699f860855aeb]
reverse link EventBusWorker to ActivityWorker--><path d="M580.1336,200.2004 C589.9155,214.8732 599.9815,229.9723 608.4165,242.6248 " fill="none" id="EventBusWorker&lt;-ActivityWorker" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="574.1654,203.8676,568.8957,183.3436,585.8142,196.1017,574.1654,203.8676" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[23aba4bc0d158aad32e01ce5d079dae1]
reverse link EventBusWorker to FlaskWorker--><path d="M512.2725,201.6936 C504.6601,218.6313 496.8514,236.0057 490.8221,249.4208 " fill="none" id="EventBusWorker&lt;-FlaskWorker" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="505.9361,198.7163,520.5197,183.3436,518.7057,204.4555,505.9361,198.7163" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[062a945d08811656f7228f0c2a0c91d4]
reverse link app to ActivityAPIBlueprint--><path d="M249.5432,502.305 C248.3944,534.0884 246.8307,577.3497 245.8697,603.9391 " fill="none" id="app&lt;-ActivityAPIBlueprint" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="250.0226,489.0402,245.8085,494.8918,249.5892,501.0324,253.8033,495.1808,250.0226,489.0402" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[e4f2f32f24c45f71dd786268467d1361]
reverse link FlaskWorker to app--><path d="M440.4394,306.0641 C396.2285,342.456 325.4368,400.7278 284.0597,434.7871 " fill="none" id="FlaskWorker&lt;-app" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="450.5311,297.7572,443.3565,298.4821,441.2662,305.3835,448.4407,304.6587,450.5311,297.7572" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8999ddcf87d516ea4203eab1bea79430]
reverse link ActivityWorker to ActivityService--><path d="M643.84,316.5361 C655.1081,349.2134 670.4434,393.6859 681.1811,424.8253 " fill="none" id="ActivityWorker&lt;-ActivityService" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="639.588,304.2053,637.7624,311.1815,643.4999,315.5498,645.3254,308.5736,639.588,304.2053" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[ba95c7f4237f35f52038bfc61d34fc99]
link Flask to Blueprint--><!--MD5=[7bc91e66d2a1940da7a755ed03b9f1fc]
link app to Flask--><path d="M164.3961,462 C159.3527,462 154.3092,462 149.2658,462 " fill="none" id="app-&gt;Flask" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="149.1836,468.9999,129.1836,462,149.1836,454.9999,149.1836,468.9999" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[c874ef239efaf627a98fbfad0dd2f9af]
link ActivityAPIBlueprint to Blueprint--><path d="M169.8218,628 C162.9224,628 156.0231,628 149.1237,628 " fill="none" id="ActivityAPIBlueprint-&gt;Blueprint" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="149.0625,634.9999,129.0625,628,149.0625,620.9999,149.0625,634.9999" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[300e9285ec805b9a8d2729f84a85b227]
link main to application--><!--MD5=[605d9347a921b61a607f7c4a5e0cd06a]
link restserver to application--><!--MD5=[9e40e20377711443ecd082752ec33bb9]
link restserver to flask--><!--MD5=[b07931159a4624d0b61c6220108084ac]
link FlaskWorker to restserver--><!--MD5=[befbd7480b822880dc733844e1de8398]
link ActivityService to ActivitySummary--><!--MD5=[2f625559c56477e5fea0ad15a757ec27]
link ActivityCommand to ActivitySummary--><!--MD5=[73f1c660b4d125c695b383a667a68fae]
@startuml

package ska_oso_oet.procedure {

package application as application_pkg {

    package main <<Rectangle>> {

        class ActivityWorker {
            run(...)
        }

        class FlaskWorker {
        }

        class EventBusWorker {
            main_loop(...)
            main_func(...)
            republish(...)
        }

        ActivityWorker -up-|> EventBusWorker
        FlaskWorker -up-|> EventBusWorker
    }

    package restserver <<Rectangle>> {
        class app <<function return value>> {
        }

        class ActivityAPIBlueprint

        app o- - ActivityAPIBlueprint
    }

    package application <<Rectangle>> {

        class ActivityService {
            history: List[ActivitySummary]

            run(cmd: ActivityCommand) -> ActivitySummary
        }

        class ActivitySummary {
            activity_id: int
            procedure_id: int
            sbd_id: str
            activity_name: str
            prepare_only: bool
            arg_override: Dict
            activity_states: List[(ActivityState, timestamp)]
        }

        class ActivityCommand {
            sbd_id: str
            activity_name: str
            prepare_only: bool
            arg_override: Dict
        }

        enum ActivityState {
            REQUESTED
        }
    }
}

FlaskWorker *- - app
ActivityWorker *- - ActivityService

package flask {
    class Flask
    class Blueprint

    Flask -down[hidden]- Blueprint
}

app -|> Flask
ActivityAPIBlueprint -|> Blueprint

main -down[hidden]- -> application
restserver -left[hidden]- -> application
restserver -right[hidden]- -> flask
FlaskWorker -down[hidden]- -> restserver
ActivityService -down[hidden]- ActivitySummary
ActivitySummary -left[hidden]- ActivityCommand

@enduml

PlantUML version 1.2020.06(Sun Apr 05 12:38:32 GMT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 14-ea+33
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>